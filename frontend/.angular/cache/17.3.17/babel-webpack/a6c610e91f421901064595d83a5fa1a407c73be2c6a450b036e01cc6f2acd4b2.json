{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/api.service\";\nimport * as i2 from \"../../services/auth.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\nfunction MyReservationsComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.successMessage, \" \");\n  }\n}\nfunction MyReservationsComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.errorMessage, \" \");\n  }\n}\nfunction MyReservationsComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵelement(1, \"div\", 9);\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3, \"Cargando reservas...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction MyReservationsComponent_div_6_div_1_div_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19)(1, \"span\", 20);\n    i0.ɵɵtext(2, \"Notas:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 21);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const appointment_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(appointment_r2.notes);\n  }\n}\nfunction MyReservationsComponent_div_6_div_1_button_46_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function MyReservationsComponent_div_6_div_1_button_46_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const appointment_r2 = i0.ɵɵnextContext().$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.cancelAppointment(appointment_r2._id));\n    });\n    i0.ɵɵtext(1, \" Cancelar \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MyReservationsComponent_div_6_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"div\", 13)(2, \"div\", 14)(3, \"span\", 15);\n    i0.ɵɵtext(4, \"\\uD83D\\uDCC5\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 16)(7, \"span\", 17);\n    i0.ɵɵtext(8, \"\\u23F0\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"div\", 18)(11, \"div\", 19)(12, \"span\", 20);\n    i0.ɵɵtext(13, \"Servicio:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"span\", 21);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\", 19)(17, \"span\", 20);\n    i0.ɵɵtext(18, \"Precio:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"span\", 21);\n    i0.ɵɵtext(20);\n    i0.ɵɵpipe(21, \"currency\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(22, \"div\", 19)(23, \"span\", 20);\n    i0.ɵɵtext(24, \"Barbero:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"span\", 21);\n    i0.ɵɵtext(26);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(27, \"div\", 19)(28, \"span\", 20);\n    i0.ɵɵtext(29, \"Cliente:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"span\", 21);\n    i0.ɵɵtext(31);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(32, \"div\", 19)(33, \"span\", 20);\n    i0.ɵɵtext(34, \"Tel\\u00E9fono:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(35, \"span\", 21);\n    i0.ɵɵtext(36);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(37, \"div\", 19)(38, \"span\", 20);\n    i0.ɵɵtext(39, \"Email:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(40, \"span\", 21);\n    i0.ɵɵtext(41);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(42, MyReservationsComponent_div_6_div_1_div_42_Template, 5, 1, \"div\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(43, \"div\", 23)(44, \"div\", 24);\n    i0.ɵɵtext(45);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(46, MyReservationsComponent_div_6_div_1_button_46_Template, 2, 0, \"button\", 25);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const appointment_r2 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.formatDate(appointment_r2.date), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", appointment_r2.time, \" \");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r0.getServiceName(appointment_r2.serviceId));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(21, 12, ctx_r0.getServicePrice(appointment_r2.serviceId), \"EUR\"));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r0.getBarberName(appointment_r2.barberId));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(appointment_r2.client);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(appointment_r2.phone);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(appointment_r2.email);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", appointment_r2.notes);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", ctx_r0.getStatusClass(appointment_r2.status));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.getStatusText(appointment_r2.status), \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", appointment_r2.status !== \"cancelled\" && appointment_r2.status !== \"completed\");\n  }\n}\nfunction MyReservationsComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵtemplate(1, MyReservationsComponent_div_6_div_1_Template, 47, 15, \"div\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.appointments);\n  }\n}\nfunction MyReservationsComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27)(1, \"div\", 28);\n    i0.ɵɵtext(2, \"\\uD83D\\uDCCB\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4, \"No tienes reservas a\\u00FAn.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 29);\n    i0.ɵɵtext(6, \"Hacer una reserva\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let MyReservationsComponent = /*#__PURE__*/(() => {\n  class MyReservationsComponent {\n    constructor(apiService, authService) {\n      this.apiService = apiService;\n      this.authService = authService;\n      this.appointments = [];\n      this.isLoading = false;\n      this.errorMessage = '';\n      this.successMessage = '';\n    }\n    ngOnInit() {\n      this.loadMyReservations();\n    }\n    loadMyReservations() {\n      const userId = this.authService.currentUser?.id;\n      if (!userId) {\n        this.errorMessage = 'Debes iniciar sesión para ver tus reservas';\n        return;\n      }\n      this.isLoading = true;\n      this.errorMessage = '';\n      this.apiService.getAppointmentsByUser(userId).subscribe({\n        next: data => {\n          this.appointments = data;\n          this.isLoading = false;\n        },\n        error: error => {\n          this.isLoading = false;\n          this.errorMessage = error.error?.message || 'Error al cargar las reservas';\n        }\n      });\n    }\n    getBarberName(barber) {\n      if (typeof barber === 'object' && barber !== null) {\n        return barber.name;\n      }\n      return 'Barbero no disponible';\n    }\n    getServiceName(service) {\n      if (typeof service === 'object' && service !== null) {\n        return service.name;\n      }\n      return 'Servicio no disponible';\n    }\n    getServicePrice(service) {\n      if (typeof service === 'object' && service !== null) {\n        return service.price;\n      }\n      return 0;\n    }\n    formatDate(date) {\n      const d = new Date(date);\n      return d.toLocaleDateString('es-ES', {\n        weekday: 'long',\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      });\n    }\n    getStatusClass(status) {\n      switch (status) {\n        case 'pending':\n          return 'status-pending';\n        case 'confirmed':\n          return 'status-confirmed';\n        case 'completed':\n          return 'status-completed';\n        case 'cancelled':\n          return 'status-cancelled';\n        default:\n          return 'status-default';\n      }\n    }\n    getStatusText(status) {\n      switch (status) {\n        case 'pending':\n          return 'Pendiente';\n        case 'confirmed':\n          return 'Confirmada';\n        case 'completed':\n          return 'Completada';\n        case 'cancelled':\n          return 'Cancelada';\n        default:\n          return 'Desconocido';\n      }\n    }\n    cancelAppointment(id) {\n      if (!id) return;\n      if (!confirm('¿Estás seguro de que quieres cancelar esta reserva?')) {\n        return;\n      }\n      this.isLoading = true;\n      const updateData = {\n        status: 'cancelled'\n      };\n      this.apiService.updateAppointment(id, updateData).subscribe({\n        next: () => {\n          this.isLoading = false;\n          this.successMessage = 'Reserva cancelada exitosamente';\n          this.loadMyReservations();\n        },\n        error: error => {\n          this.isLoading = false;\n          this.errorMessage = error.error?.message || 'Error al cancelar la reserva';\n        }\n      });\n    }\n    static {\n      this.ɵfac = function MyReservationsComponent_Factory(t) {\n        return new (t || MyReservationsComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.AuthService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: MyReservationsComponent,\n        selectors: [[\"app-my-reservations\"]],\n        decls: 8,\n        vars: 5,\n        consts: [[1, \"my-reservations-container\"], [\"class\", \"success-message\", 4, \"ngIf\"], [\"class\", \"error-message\", 4, \"ngIf\"], [\"class\", \"loading-container\", 4, \"ngIf\"], [\"class\", \"reservations-list\", 4, \"ngIf\"], [\"class\", \"no-reservations\", 4, \"ngIf\"], [1, \"success-message\"], [1, \"error-message\"], [1, \"loading-container\"], [1, \"spinner\"], [1, \"reservations-list\"], [\"class\", \"reservation-card\", 4, \"ngFor\", \"ngForOf\"], [1, \"reservation-card\"], [1, \"reservation-header\"], [1, \"reservation-date\"], [1, \"date-icon\"], [1, \"reservation-time\"], [1, \"time-icon\"], [1, \"reservation-details\"], [1, \"detail-row\"], [1, \"label\"], [1, \"value\"], [\"class\", \"detail-row\", 4, \"ngIf\"], [1, \"reservation-footer\"], [1, \"status-badge\", 3, \"ngClass\"], [\"class\", \"btn-cancel\", 3, \"click\", 4, \"ngIf\"], [1, \"btn-cancel\", 3, \"click\"], [1, \"no-reservations\"], [1, \"empty-icon\"], [\"routerLink\", \"/reservation\", 1, \"btn-primary\"]],\n        template: function MyReservationsComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n            i0.ɵɵtext(2, \"Mis Reservas\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(3, MyReservationsComponent_div_3_Template, 2, 1, \"div\", 1)(4, MyReservationsComponent_div_4_Template, 2, 1, \"div\", 2)(5, MyReservationsComponent_div_5_Template, 4, 0, \"div\", 3)(6, MyReservationsComponent_div_6_Template, 2, 1, \"div\", 4)(7, MyReservationsComponent_div_7_Template, 7, 0, \"div\", 5);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.successMessage);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && ctx.appointments.length > 0);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && ctx.appointments.length === 0);\n          }\n        },\n        dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf, i4.RouterLink, i3.CurrencyPipe],\n        styles: [\".my-reservations-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px}h2[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:30px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:40px}.spinner[_ngcontent-%COMP%]{border:4px solid #f3f3f3;border-top:4px solid #d4a574;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.success-message[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;padding:15px;border-radius:5px;margin-bottom:20px;text-align:center}.error-message[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;padding:15px;border-radius:5px;margin-bottom:20px;text-align:center}.reservations-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.reservation-card[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 2px 10px #0000001a;overflow:hidden}.reservation-header[_ngcontent-%COMP%]{background:#d4a574;color:#fff;padding:15px 20px;display:flex;justify-content:space-between;align-items:center}.reservation-date[_ngcontent-%COMP%], .reservation-time[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-weight:500}.reservation-details[_ngcontent-%COMP%]{padding:20px}.detail-row[_ngcontent-%COMP%]{display:flex;margin-bottom:10px}.detail-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.label[_ngcontent-%COMP%]{font-weight:600;color:#666;min-width:100px}.value[_ngcontent-%COMP%]{color:#333}.reservation-footer[_ngcontent-%COMP%]{padding:15px 20px;border-top:1px solid #eee;display:flex;justify-content:space-between;align-items:center}.status-badge[_ngcontent-%COMP%]{padding:5px 15px;border-radius:20px;font-size:14px;font-weight:500}.status-pending[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404}.status-confirmed[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.status-completed[_ngcontent-%COMP%]{background-color:#cce5ff;color:#004085}.status-cancelled[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.status-default[_ngcontent-%COMP%]{background-color:#e2e3e5;color:#383d41}.btn-cancel[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;padding:8px 20px;border-radius:5px;cursor:pointer;font-size:14px;transition:background-color .3s}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#c82333}.no-reservations[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;background:#fff;border-radius:10px;box-shadow:0 2px 10px #0000001a}.empty-icon[_ngcontent-%COMP%]{font-size:60px;margin-bottom:20px}.no-reservations[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:20px}.btn-primary[_ngcontent-%COMP%]{background-color:#d4a574;color:#fff;border:none;padding:12px 30px;border-radius:5px;cursor:pointer;font-size:16px;transition:background-color .3s}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#c49564}\"]\n      });\n    }\n  }\n  return MyReservationsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}